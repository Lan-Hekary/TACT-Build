!function(e){function t(t){for(var a,o,c=t[0],i=t[1],s=t[2],m=0,d=[];m<c.length;m++)o=c[m],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(u&&u(t);d.length;)d.shift()();return l.push.apply(l,s||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],a=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(a=!1)}a&&(l.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={0:0},l=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var l,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=function(e){return o.p+""+{2:"3367b7e3db9dc6acdbe8",3:"8dd027c3bf618c558899"}[e]+"-bundle.js"}(e);var i=new Error;l=function(t){c.onerror=c.onload=null,clearTimeout(s);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),l=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+a+": "+l+")",i.name="ChunkLoadError",i.type=a,i.request=l,n[1](i)}r[e]=void 0}};var s=setTimeout((function(){l({type:"timeout",target:c})}),12e4);c.onerror=c.onload=l,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=i;l.push([29,1]),n()}({28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(9),o=n(1);const c=Object(a.createContext)();c.displayName="DataContext";const{isFullScreen:i,setFullScreen:s}=window.electron.remote.getCurrentWindow();function u(e){return Array.from(e,(function(e){return("0"+(255&e).toString(16)).slice(-2)})).join(" ")}var m=e=>{const[t,n]=Object(a.useState)([]),[l,m]=Object(a.useState)("Not Connected"),[d,p]=Object(a.useState)({calState:0,calibration:0,installation:0,camera:[0,0],currentPoint:{x:0,y:0}}),[w,f]=Object(a.useState)({warper0:{},warper1:{},full:!1}),[b,v]=Object(a.useState)({}),[E,g]=Object(a.useState)(0);let h=Object(o.e)(),y=Object(o.d)();const C=(e,t)=>{h.pathname!==e&&(t&&!i()?(console.log("FullScreen",!0),s(!0)):!t&&i()&&(console.log("FullScreen",!1),s(!1)),console.log("Navigate",e),y.replace(e))};return Object(a.useEffect)(()=>{m(`CalState : ${d.calState}, Calibration : ${d.calibration}, Installation : ${d.installation}, Camera : (${d.camera[0]},${d.camera[1]}), Point : (${d.currentPoint.x},${d.currentPoint.y}) `),16==d.calState&&0==d.installation&&C("/devControl",!1),17==d.calState&&1==d.calibration&&0==d.installation&&C("/devControl",!1),1==d.calState&&1==d.calibration&&0==d.installation&&C("/start",!0),3==d.calState&&1==d.calibration&&0==d.installation&&C("/calibration",!0),3==d.calState&&1==d.calibration&&1==d.installation&&C("/installation",!0)},[d]),Object(a.useEffect)(()=>{for(let e=0;e<2;e++)if(1==w["warper"+e].full){console.log(w);let t="";for(let n=0;n<4;n++){t+=`${w["warper"+e]["dstPoint"+n].x},${w["warper"+e]["dstPoint"+n].y} `;let a=w["warper"+e].rawData.slice(4*n,4*n+4);console.log(`${a[0]+(a[1]<<8)},${a[2]+(a[3]<<8)}`)}f({...w,["warper"+e]:{full:2,polygon:t},full:!!e})}w.full&&console.log(w)},[w]),Object(a.useEffect)(()=>{0!==Object.keys(b).length&&console.log("calibrationPoints",b)},[b]),Object(a.useEffect)(()=>{18===t[0]?p({calState:t[25],calibration:t[26],installation:t[27],camera:[t[4],t[8]],currentPoint:{x:t[21]+256*t[22],y:t[23]+256*t[24]}}):8===t[0]?(m(u(t)),t[1]>=0&&t[1]<8&&(window.currentDev.write([0,170,84,t[1]+1]),f({...w,["warper"+(t[1]>>2&1)]:{...w["warper"+(t[1]>>2&1)],rawData:t.slice(12,28),full:3==(3&t[1])?1:0,["dstPoint"+(3&t[1])]:{x:t[4]+(t[5]<<8)+(t[6]<<16)+(t[7]<<24),y:t[8]+(t[9]<<8)+(t[10]<<16)+(t[11]<<24)}},full:!1}))):9===t[0]?(t[1]>=0&&t[1]<5&&window.currentDev.write([0,170,83,t[1]+1]),v({...b,["calPoint"+t[1]]:{valid:t[20],src0:{x:t[12]+(t[13]<<8),y:t[14]+(t[15]<<8)},src1:{x:t[16]+(t[17]<<8),y:t[18]+(t[19]<<8)}}}),m(u(t))):4===t[0]&&(console.log("DevMode",t[4]),g(t[4]))},[t]),r.a.createElement(c.Provider,{value:{data:t,setData:n,reading:l,setReading:m,calibrationObj:d,installationObj:w,devMode:E}},e.children)};const d=Object(a.createContext)();d.displayName="DeviceContext";const{ipcRenderer:p}=window.electron,w=e=>{"Escape"===e.code&&window.currentDev&&window.currentDev.write([0,170,85,5]),"Space"===e.code&&window.currentDev&&window.currentDev.write([0,170,83,0]),"KeyW"===e.code&&window.currentDev&&window.currentDev.write([0,170,84,0])};function f(e){return"linux"!==window.electron.remote.process.platform?64794===e.vendorId&&15617===e.productId&&65472===e.usagePage&&3072===e.usage:64794===e.vendorId&&15617===e.productId&&0===e.interface}var b=e=>{const[t,n]=Object(a.useState)([]),[l,i]=Object(a.useState)(null),{setData:s,setReading:u}=Object(a.useContext)(c),m=Object(o.d)(),p=Object(o.e)();Object(a.useEffect)(()=>(window.usbDetect.startMonitoring(),window.usbDetect.on("change:64794:15617",e=>{console.log("change",e),setTimeout(()=>{n(window.HID.devices().filter(f))},200)}),n(window.HID.devices().filter(f)),function(){n([]),window.usbDetect.stopMonitoring(),l.close(),i(null)}),[]);const b=Object(a.useRef)(!0);return Object(a.useEffect)(()=>{b.current?b.current=!1:l?(console.log("currentDev add ",l),u("Connected"),l.setNonBlocking(!0),l.on("data",(function(e){s(e)})),l.on("error",(function(e){console.error(e),l.close(),i(null)})),window.currentDev=l,window.addEventListener("keydown",w,!0),m.push("/devControl"),setTimeout(()=>{l.write([0,170,85,0])},500)):(console.log("currentDev remove ",l),u("Not Connected"),window.currentDev=null,window.removeEventListener("keydown",w,!0),window.electron.remote.getCurrentWindow().setFullScreen(!1),"/firmware"!=p.pathname&&m.replace("/"))},[l]),Object(a.useEffect)(()=>{1===t.length&&(l&&l.close(),i(new window.HID.HID(t[0].path)))},[t]),r.a.createElement(d.Provider,{value:{currentDev:l,setCurrentDev:i,devs:t,setDevs:n}},e.children)};var v=()=>{const{currentDev:e,setCurrentDev:t,devs:n}=Object(a.useContext)(d);return e?null:r.a.createElement("div",null,r.a.createElement("ul",{className:"list-group list-group-flush"},n.map((n,a)=>r.a.createElement("li",{key:a,className:"list-group-item",onClick:()=>{e&&e.close(),t(new window.HID.HID(n.path))}},r.a.createElement("div",null,"Path : ",n.path),r.a.createElement("div",null,"Serial : ",n.serialNumber),r.a.createElement("div",null,"Manufacturer:",n.manufacturer,", Product:",n.product,", interface:",n.interface,", VID:0x",n.vendorId.toString(16),", PID:0x",n.productId.toString(16)),n.usagePage&&r.a.createElement("div",null,"Usage Page : 0x",n.usagePage.toString(16),", Usage : 0x",n.usage.toString(16))))))},E=n.p+"svg/icons-m3yJFn7m7x.svg";var g=({name:e,clickCB:t=null,rotate:n=0,size:l=100,x:o=50,y:c=50,style:i={}})=>{const[s,u]=Object(a.useState)(!1);return r.a.createElement("svg",{onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},onClick:()=>{t&&t()},className:"noDrag icon icon-"+e,style:t?{position:"absolute",marginLeft:-l/2,marginTop:-l/2,left:o+"vw",top:c+"vh",width:l,height:l,...i}:{width:l,height:l,...i},transform:`rotate(${n})`,viewBox:"0 0 100 100"},t?r.a.createElement("use",{xlinkHref:`${E}#${e}-${s?"Hover":"Normal"}`}):r.a.createElement("use",{xlinkHref:`${E}#${e}`}))};var h=()=>r.a.createElement("button",{onClick:()=>{window.close()}},r.a.createElement("div",{style:{display:"flex",whiteSpace:"nowrap",alignContent:"center",alignItems:"center"}},r.a.createElement(g,{name:"Cross-Icon",size:40}),r.a.createElement("label",{style:{margin:5}},"Exit")));var y=()=>{let e=Object(o.d)();return r.a.createElement("div",{className:"HomeContainer"},r.a.createElement("h1",null,"Home"),r.a.createElement("h3",null,"Please Connect the Device."),r.a.createElement("div",{style:{whiteSpace:"nowrap",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{onClick:()=>{e.push("/firmware")}},"Burn Firmware"),r.a.createElement(h,null)),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(v,null)))};const C=({strokeWidth:e,percentage:t,color:n})=>{const a=30-e/2,l=`\n    M 50,50 m 0,-${a}\n    a ${a},${a} 0 1 1 0,${2*a}\n    a ${a},${a} 0 1 1 0,-${2*a}\n    `,o=`\n    M 50 50 m 0 0 \n    h ${a} h -${2*a} h ${a}\n    v ${a} v -${2*a} v ${a}\n    `,c=2*Math.PI*a,i={stroke:n,strokeLinecap:"round",strokeDasharray:`${c}px ${c}px`,strokeDashoffset:(100-t)/100*c+"px"};return r.a.createElement("svg",{className:"CircularProgressbar",viewBox:"0 0 100 100",width:100,height:100},r.a.createElement("path",{className:"CircularProgressbar-target",d:o,strokeWidth:e,fillOpacity:0,style:{stroke:"#d6d6d6"}}),r.a.createElement("path",{className:"CircularProgressbar-trail",d:l,strokeWidth:e,fillOpacity:0,style:{stroke:"#d6d6d6"}}),r.a.createElement("path",{className:"CircularProgressbar-path",d:l,strokeWidth:e,fillOpacity:0,style:i}))};var x=({x:e,y:t,cam:n})=>{let a=255==n[0]?100:n[0],l=255==n[1]?100:n[1],o=n[0]&&n[1]?((a+l)/2).toFixed(0):a+l,c=n[0]&&n[1]?"#007dbc":"#ff8000";return c=100==o?"#00bd19":c,e&&t?r.a.createElement("div",{style:{position:"absolute",left:e/100+"vw",top:t/100+"vh",marginLeft:-51,marginTop:-51,width:100,height:100}},r.a.createElement(C,{strokeWidth:5,percentage:o,color:c})):null};var j=e=>{const{currentDev:t}=Object(a.useContext)(d),{calibrationObj:n}=Object(a.useContext)(c);return r.a.createElement("div",null,r.a.createElement("h1",null,"Start"),r.a.createElement("h3",null,"Start Page"),r.a.createElement(x,{x:n.currentPoint.x,y:n.currentPoint.y,cam:n.camera}),r.a.createElement(g,{name:"Stop",clickCB:()=>{t.write([0,170,85,4])},size:70,x:50,y:70}))};var O=()=>{const{currentDev:e}=Object(a.useContext)(d),{calibrationObj:t}=Object(a.useContext)(c);return r.a.createElement("div",null,r.a.createElement("h1",null,"Calibration"),r.a.createElement("h3",null,"Calibration Page"),r.a.createElement(x,{x:t.currentPoint.x,y:t.currentPoint.y,cam:t.camera}),r.a.createElement(g,{name:"Reload",clickCB:()=>{e.write([0,170,85,2])},size:70,x:47,y:50}),r.a.createElement(g,{name:"Stop",clickCB:()=>{e.write([0,170,85,5])},size:70,x:53,y:50}))};var S=()=>{const{currentDev:e}=Object(a.useContext)(d),{calibrationObj:t,installationObj:n}=Object(a.useContext)(c),[l,o]=Object(a.useState)(!1);return Object(a.useEffect)(()=>{l||16!=t.calState||1!=t.installation||(e.write([0,170,84,0]),o(!0))},[t]),r.a.createElement("div",null,r.a.createElement("h1",null,"Installation"),r.a.createElement("h3",null,"Installation Page"),r.a.createElement(x,{x:t.currentPoint.x,y:t.currentPoint.y,cam:t.camera}),!l&&r.a.createElement("div",null,r.a.createElement(g,{name:"Reload",clickCB:()=>{e.write([0,170,85,3])},size:70,x:47,y:50}),r.a.createElement(g,{name:"Stop",clickCB:()=>{e.write([0,170,85,5])},size:70,x:53,y:50})),l&&r.a.createElement("div",null,r.a.createElement("div",{style:{position:"absolute",left:"50vw",top:"50vh",marginLeft:-250,marginTop:-150,width:500,height:300}},r.a.createElement("svg",{width:500,height:300,style:{background:"#FFF"},preserveAspectRatio:"none",viewBox:"-10000 -10000 30000 30000"},r.a.createElement("rect",{width:1e4,height:1e4,style:{fill:"#ff0000",fillOpacity:.5}}),n.full&&r.a.createElement("g",{fillOpacity:.5},r.a.createElement("polygon",{fill:"#00ff00",points:n.warper0.polygon}),r.a.createElement("polygon",{fill:"#00ff00",points:n.warper1.polygon})))),r.a.createElement(g,{name:"Arrow",clickCB:()=>{e.write([0,170,85,5]),o(!1)},size:70,x:45,y:70}),r.a.createElement(g,{name:"Reload",clickCB:()=>{e.write([0,170,85,3]),o(!1)},size:70,x:50,y:70}),r.a.createElement(g,{name:"Arrow",clickCB:()=>{e.write([0,170,85,2]),o(!1)},size:70,rotate:180,x:55,y:70})))},D=(n(24),n(11)),k=n.n(D);const P=[{label:"Mouse",value:0},{label:"Pen",value:1},{label:"Multiouch",value:2}];var $=()=>{const{currentDev:e}=Object(a.useContext)(d),{devMode:t,setDevMode:n}=Object(a.useContext)(c);let l=Object(o.d)();return r.a.createElement("div",{className:"HomeContainer"},r.a.createElement("div",{style:{whiteSpace:"nowrap",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{onClick:()=>{e.write([0,170,85,1])}},r.a.createElement(g,{name:"Start-Icon",size:80}),r.a.createElement("br",null),"Start"),r.a.createElement("button",{onClick:()=>{e.write([0,170,85,2])}},r.a.createElement(g,{name:"Target-Hover",size:80}),r.a.createElement("br",null),"Calibrate"),r.a.createElement("button",{onClick:()=>{e.write([0,170,85,3])}},r.a.createElement(g,{name:"Installation-Icon",size:80}),r.a.createElement("br",null),"Install")),r.a.createElement("div",{className:"noDrag",style:{height:30,margin:5}},r.a.createElement(k.a,{onChange:t=>{0===t?e.write([0,170,85,8]):1===t?e.write([0,170,85,7]):2===t&&e.write([0,170,85,6]),console.log("Change DevMode",t)},options:P,forcedSelectedIndex:t})),r.a.createElement("div",{style:{whiteSpace:"nowrap",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{onClick:()=>{l.push("/firmware")}},"Burn Firmware"),r.a.createElement(h,null)))};var I=()=>{const{currentDev:e}=Object(a.useContext)(d),[t,l]=Object(a.useState)(!1),[c,i]=Object(a.useState)("");let s=Object(o.d)();const u=t=>{e&&e.write([0,119,119]),Promise.all([n.e(2),n.e(3)]).then(n.bind(null,71)).then(n=>{l(!0),setTimeout(()=>{new Avrgirl({board:"leonardo",debug:i,disableVerify:!0,manualReset:!0}).flash(new Array(n[t]),(function(e){e?(console.error(e),i(e.message)):(console.info("done."),i("done.")),l(!1)}))},e?1e3:0)})};return r.a.createElement("div",{className:"HomeContainer"},r.a.createElement("h1",null,"Firmware"),r.a.createElement("h3",null,t?"burning":"Choose Firmware to Burn"),r.a.createElement("div",null,c),r.a.createElement("div",{style:{whiteSpace:"nowrap",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{onClick:()=>{u("Java")}},"Java"),r.a.createElement("button",{onClick:()=>{u("Wireless")}},"Wireless"),r.a.createElement("button",{onClick:()=>{u("MultiUser")}},"Multiuser")),r.a.createElement("div",{style:{whiteSpace:"nowrap",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{onClick:()=>{e?s.goBack():s.replace("/")}},"Back"),r.a.createElement(h,null)))};var M=e=>r.a.createElement(m,null,r.a.createElement(b,null,r.a.createElement(o.c,null,r.a.createElement(o.b,{exact:!0,path:"/",component:y}),r.a.createElement(o.b,{path:"/devControl",component:$}),r.a.createElement(o.b,{path:"/start",component:j}),r.a.createElement(o.b,{path:"/firmware",component:I}),r.a.createElement(o.b,{path:"/calibration"},r.a.createElement(O,null)),r.a.createElement(o.b,{path:"/installation"},r.a.createElement(S,null)))));n(28);let B=document.createElement("div");B.id="root",document.body.appendChild(B),Object(l.render)(r.a.createElement(o.a,null,r.a.createElement(M,null)),document.getElementById("root"))}});