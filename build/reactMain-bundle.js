!function(e){function t(t){for(var a,o,c=t[0],i=t[1],s=t[2],d=0,m=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(u&&u(t);m.length;)m.shift()();return l.push.apply(l,s||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],a=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(a=!1)}a&&(l.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={0:0},l=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var l,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=function(e){return o.p+""+{2:"d94eb5456d38306f0f86",3:"36b56ee277ababff204f"}[e]+"-bundle.js"}(e);var i=new Error;l=function(t){c.onerror=c.onload=null,clearTimeout(s);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),l=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+a+": "+l+")",i.name="ChunkLoadError",i.type=a,i.request=l,n[1](i)}r[e]=void 0}};var s=setTimeout((function(){l({type:"timeout",target:c})}),12e4);c.onerror=c.onload=l,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=i;l.push([40,1]),n()}({1:function(e,t,n){"use strict";var a=n(0),r=n.n(a),l=n.p+"svg/icons-m3yJFn7m7x.svg";t.a=({name:e,clickCB:t=null,rotate:n=0,size:o=100,x:c=50,y:i=50,style:s={}})=>{const[u,d]=Object(a.useState)(!1);return r.a.createElement("svg",{onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},onClick:()=>{t&&t()},className:"noDrag icon icon-"+e,style:t?{position:"absolute",marginLeft:-o/2,marginTop:-o/2,left:c+"vw",top:i+"vh",width:o,height:o,...s}:{width:o,height:o,...s},transform:`rotate(${n})`,viewBox:"0 0 100 100"},t?r.a.createElement("use",{xlinkHref:`${l}#${e}-${u?"Hover":"Normal"}`}):r.a.createElement("use",{xlinkHref:`${l}#${e}`}))}},2:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(0),r=n.n(a),l=n(3),o=n(4);const c=[[512,384],[128,96],[512,96],[896,96],[896,672],[512,672],[128,672],[448,336],[576,336],[576,432],[448,432]],i=[0,170,221,0,0,255,3,255,3,15,255,3,255,3,15,255,3,255,3,15,255,3,255,3,15],s=([[13,12]].concat(Array.from({length:101},(e,t)=>[10*t+12,Math.floor(10*t*.744)+12])),[[13,756]].concat(Array.from({length:101},(e,t)=>[10*t+12,768-Math.floor(10*t*.744)-12])),([e,t],n=0)=>{let a=[];a.push(0,170,221,0,0);let r=255&e;return a.push(r+n),a.push((e-r)/256&255),r=255&t,a.push(r+n),a.push((t-r)/256&255),a.push(2),a}),u=e=>{const t=Date.now()+e;for(;Date.now()<t;)continue},d=Object(a.createContext)();d.displayName="DeviceContext";const{ipcRenderer:m}=window.electron,p=e=>{if("Escape"===e.code&&window.currentDev&&window.currentDev.write([0,170,85,5]),"Space"===e.code&&window.currentDev&&window.currentDev.write([0,170,83,0]),"KeyW"===e.code&&window.currentDev&&window.currentDev.write([0,170,84,0]),e.code.includes("Digit")){let t=parseInt(e.key)+(!0===e.altKey?6:0);window.currentDev&&(console.log("DebugPoint",t),((e,t,n)=>{e.write(s(c[t],1)),u(5),e.write(s(c[t])),setTimeout(()=>e.write(i),n),console.log("DebugPoint",t)})(window.currentDev,t,!0===e.ctrlKey?10:650))}"KeyD"===e.code&&!0===e.ctrlKey&&!0===e.shiftKey&&!0===e.altKey&&window.electron.remote.getCurrentWindow().openDevTools({mode:"undocked"}),"KeyF"===e.code&&!0===e.ctrlKey&&!0===e.shiftKey&&!0===e.altKey&&window.routerHistory.push("/firmware")};function f(e){return"linux"!==window.electron.remote.process.platform?64794===e.vendorId&&15617===e.productId&&65472===e.usagePage&&3072===e.usage:64794===e.vendorId&&15617===e.productId&&0===e.interface}t.b=e=>{const[t,n]=Object(a.useState)([]),[c,i]=Object(a.useState)(null),{setData:s,setReading:u}=Object(a.useContext)(l.a),m=Object(o.d)(),w=Object(o.e)();Object(a.useEffect)(()=>(window.usbDetect.startMonitoring(),window.usbDetect.on("change:64794:15617",e=>{console.log("change",e),setTimeout(()=>{n(window.HID.devices().filter(f))},200)}),n(window.HID.devices().filter(f)),electron.remote.getCurrentWindow().setBackgroundThrottling(!1),window.routerHistory=m,function(){n([]),window.usbDetect.stopMonitoring(),c.close(),i(null),electron.remote.globalShortcut.unregisterAll()}),[]);const v=Object(a.useRef)(!0);return Object(a.useEffect)(()=>{v.current?v.current=!1:c?(console.log("currentDev add ",c),u("Connected"),c.setNonBlocking(!0),c.on("data",(function(e){s(e)})),c.on("error",(function(e){console.error(e),c.close(),i(null)})),window.currentDev=c,window.addEventListener("keydown",p,!0),m.push("/devControl"),setTimeout(()=>{c.write([0,170,85,0])},500)):(console.log("currentDev remove ",c),u("Not Connected"),window.currentDev=null,window.removeEventListener("keydown",p,!0),window.electron.remote.getCurrentWindow().setFullScreen(!1),"/firmware"!=w.pathname&&m.replace("/"))},[c]),Object(a.useEffect)(()=>{1===t.length&&(c&&c.close(),i(new window.HID.HID(t[0].path)))},[t]),r.a.createElement(d.Provider,{value:{currentDev:c,setCurrentDev:i,devs:t,setDevs:n}},e.children)}},20:function(e,t,n){"use strict";(function(e){var a=n(0),r=n.n(a),l=n(4),o=(n(8),n(6)),c=n(2);t.a=()=>{const{currentDev:t}=Object(a.useContext)(c.a),[i,s]=Object(a.useState)(!1),[u,d]=Object(a.useState)("");let m=Object(l.d)();const p=a=>{t&&t.write([0,119,119]),Promise.all([n.e(2),n.e(3)]).then(n.bind(null,41)).then(n=>{s(!0),setTimeout(()=>{new Avrgirl({board:{name:"TACT",baud:57600,signature:e.from([67,65,84,69,82,73,78]),productId:["0x0036","0x8036","0x800c"],productPage:"https://store.arduino.cc/leonardo",protocol:"avr109"},debug:d,disableVerify:!0,manualReset:!0}).flash(new Array(n[a]),(function(e){e?(console.error(e),d(e.message)):(console.info("done."),d("done.")),s(!1)}))},t?1e3:0)})};return r.a.createElement("div",{className:"HomeContainer"},r.a.createElement("h1",null,"Firmware"),r.a.createElement("h3",null,i?"burning":"Choose Firmware to Burn"),r.a.createElement("div",null,u),r.a.createElement("div",{style:{whiteSpace:"nowrap",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{onClick:()=>{p("Java")}},"Java"),r.a.createElement("button",{onClick:()=>{p("Wireless")}},"Wireless"),r.a.createElement("button",{onClick:()=>{p("MultiUser")}},"Multiuser")),r.a.createElement("div",{style:{whiteSpace:"nowrap",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{onClick:()=>{t?m.goBack():m.replace("/")}},"Back"),r.a.createElement(o.a,null)))}}).call(this,n(34).Buffer)},3:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),l=n(4);const o=Object(a.createContext)();o.displayName="DataContext";const{isFullScreen:c,setFullScreen:i}=window.electron.remote.getCurrentWindow();function s(e){return Array.from(e,(function(e){return("0"+(255&e).toString(16)).slice(-2)})).join(" ")}t.b=e=>{const[t,n]=Object(a.useState)(new Array(64)),[u,d]=Object(a.useState)("Not Connected"),[m,p]=Object(a.useState)({calState:0,calError:0,calibration:0,installation:0,camera:[0,0],currentPoint:{x:0,y:0}}),[f,w]=Object(a.useState)({warper0:{},warper1:{},full:!1}),[v,b]=Object(a.useState)({}),[g,h]=Object(a.useState)(0);let E=Object(l.e)(),y=Object(l.d)();const C=(e,t)=>{E.pathname!==e&&(t&&!c()?(console.log("FullScreen",!0),i(!0)):!t&&c()&&(console.log("FullScreen",!1),i(!1)),console.log("Navigate",e),y.replace(e))};return Object(a.useEffect)(()=>{16==m.calState&&0==m.installation&&C("/devControl",!1),17==m.calState&&1==m.calibration&&0==m.installation&&C("/devControl",!1),1==m.calState&&1==m.calibration&&0==m.installation&&C("/start",!0),3==m.calState&&1==m.calibration&&0==m.installation&&C("/calibration",!0),3==m.calState&&1==m.calibration&&1==m.installation&&C("/installation",!0)},[m]),Object(a.useEffect)(()=>{for(let e=0;e<2;e++)if(1==f["warper"+e].full){console.log(f);let t="";for(let n=0;n<4;n++){t+=`${f["warper"+e]["dstPoint"+n].x},${f["warper"+e]["dstPoint"+n].y} `;let a=f["warper"+e].rawData.slice(4*n,4*n+4);console.log(`${a[0]+(a[1]<<8)},${a[2]+(a[3]<<8)}`)}w({...f,["warper"+e]:{full:2,polygon:t},full:!!e})}f.full&&console.log(f)},[f]),Object(a.useEffect)(()=>{0!==Object.keys(v).length&&console.log("calibrationPoints",v)},[v]),Object(a.useEffect)(()=>{18===t[0]?(d(s(t)),p({calState:t[25],calError:t[1],calibration:t[26],installation:t[27],camera:[t[4],t[8]],currentPoint:{x:t[21]+256*t[22],y:t[23]+256*t[24]}})):8===t[0]?(d(s(t)),t[1]>=0&&t[1]<8&&(window.currentDev.write([0,170,84,t[1]+1]),w({...f,["warper"+(t[1]>>2&1)]:{...f["warper"+(t[1]>>2&1)],rawData:t.slice(12,28),full:3==(3&t[1])?1:0,["dstPoint"+(3&t[1])]:{x:t[4]+(t[5]<<8)+(t[6]<<16)+(t[7]<<24),y:t[8]+(t[9]<<8)+(t[10]<<16)+(t[11]<<24)}},full:!1}))):9===t[0]?(t[1]>=0&&t[1]<5&&window.currentDev.write([0,170,83,t[1]+1]),b({...v,["calPoint"+t[1]]:{valid:t[20],src0:{x:t[12]+(t[13]<<8),y:t[14]+(t[15]<<8)},src1:{x:t[16]+(t[17]<<8),y:t[18]+(t[19]<<8)}}}),d(s(t))):4===t[0]&&(console.log("DevMode",t[4]),h(t[4]))},[t]),r.a.createElement(o.Provider,{value:{data:t,setData:n,reading:u,setReading:d,calibrationObj:m,installationObj:f,devMode:g}},e.children)}},38:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(15),o=n(4),c=n(8),i=n(6);var s=()=>{Object(o.d)();return r.a.createElement("div",{className:"HomeContainer"},r.a.createElement("h1",null,"Home"),r.a.createElement("h3",null,"Please Connect the Device."),r.a.createElement("div",{style:{whiteSpace:"nowrap",display:"flex",justifyContent:"center"}},r.a.createElement(i.a,null)),r.a.createElement("div",{style:{display:"none"}},r.a.createElement(c.a,null)))},u=n(3),d=n(2);const m=({strokeWidth:e,percentage:t,color:n})=>{const a=30-e/2,l=`\n    M 50,50 m 0,-${a}\n    a ${a},${a} 0 1 1 0,${2*a}\n    a ${a},${a} 0 1 1 0,-${2*a}\n    `,o=`\n    M 50 50 m 0 0 \n    h ${a} h -${2*a} h ${a}\n    v ${a} v -${2*a} v ${a}\n    `,c=2*Math.PI*a,i={stroke:n,strokeLinecap:"round",strokeDasharray:`${c}px ${c}px`,strokeDashoffset:(100-t)/100*c+"px"};return r.a.createElement("svg",{className:"CircularProgressbar",viewBox:"0 0 100 100",width:100,height:100},r.a.createElement("path",{className:"CircularProgressbar-target",d:o,strokeWidth:e,fillOpacity:0,style:{stroke:"#d6d6d6"}}),r.a.createElement("path",{className:"CircularProgressbar-trail",d:l,strokeWidth:e,fillOpacity:0,style:{stroke:"#d6d6d6"}}),r.a.createElement("path",{className:"CircularProgressbar-path",d:l,strokeWidth:e,fillOpacity:0,style:i}))};var p=({x:e,y:t,cam:n})=>{let a=255==n[0]?100:n[0],l=255==n[1]?100:n[1],o=n[0]&&n[1]?((a+l)/2).toFixed(0):a+l,c=n[0]&&n[1]?"#007dbc":"#ff8000";return c=100==o?"#00bd19":c,e&&t?r.a.createElement("div",{style:{position:"absolute",left:e/100+"vw",top:t/100+"vh",marginLeft:-51,marginTop:-51,width:100,height:100}},r.a.createElement(m,{strokeWidth:5,percentage:o,color:c})):null},f=n(1);var w=e=>{const{currentDev:t}=Object(a.useContext)(d.a),{calibrationObj:n}=Object(a.useContext)(u.a);return r.a.createElement("div",null,r.a.createElement("h1",null,"Start"),r.a.createElement("h3",null,"Start Page"),r.a.createElement(p,{x:n.currentPoint.x,y:n.currentPoint.y,cam:n.camera}),r.a.createElement(f.a,{name:"Stop",clickCB:()=>{t.write([0,170,85,4])},size:70,x:50,y:70}))};var v=()=>{const{currentDev:e}=Object(a.useContext)(d.a),{calibrationObj:t}=Object(a.useContext)(u.a);return r.a.createElement("div",null,r.a.createElement("h1",null,"Calibration"),r.a.createElement("h3",null,"Calibration Page"),r.a.createElement(p,{x:t.currentPoint.x,y:t.currentPoint.y,cam:t.camera}),r.a.createElement(f.a,{name:"Reload",clickCB:()=>{e.write([0,170,85,2])},size:70,x:47,y:50}),r.a.createElement(f.a,{name:"Stop",clickCB:()=>{e.write([0,170,85,5])},size:70,x:53,y:50}))};var b=()=>{const{currentDev:e}=Object(a.useContext)(d.a),{calibrationObj:t,installationObj:n}=Object(a.useContext)(u.a),[l,o]=Object(a.useState)(!1);return Object(a.useEffect)(()=>{l||16!=t.calState||1!=t.installation||(e.write([0,170,84,0]),o(!0))},[t]),r.a.createElement("div",null,r.a.createElement("h1",null,"Installation"),r.a.createElement("h3",null,"Installation Page"),r.a.createElement(p,{x:t.currentPoint.x,y:t.currentPoint.y,cam:t.camera}),!l&&r.a.createElement("div",null,r.a.createElement(f.a,{name:"Reload",clickCB:()=>{e.write([0,170,85,3])},size:70,x:47,y:50}),r.a.createElement(f.a,{name:"Stop",clickCB:()=>{e.write([0,170,85,5])},size:70,x:53,y:50})),l&&r.a.createElement("div",null,r.a.createElement("div",{style:{position:"absolute",left:"50vw",top:"50vh",marginLeft:-250,marginTop:-150,width:500,height:300}},r.a.createElement("svg",{width:500,height:300,style:{background:"#FFF"},preserveAspectRatio:"none",viewBox:"-10000 -10000 30000 30000"},r.a.createElement("rect",{width:1e4,height:1e4,style:{fill:"#ff0000",fillOpacity:.5}}),n.full&&r.a.createElement("g",{fillOpacity:.5},r.a.createElement("polygon",{fill:"#00ff00",points:n.warper0.polygon}),r.a.createElement("polygon",{fill:"#00ff00",points:n.warper1.polygon})))),r.a.createElement(f.a,{name:"Arrow",clickCB:()=>{e.write([0,170,85,5]),o(!1)},size:70,x:45,y:70}),r.a.createElement(f.a,{name:"Reload",clickCB:()=>{e.write([0,170,85,3]),o(!1)},size:70,x:50,y:70}),r.a.createElement(f.a,{name:"Arrow",clickCB:()=>{e.write([0,170,85,2]),o(!1)},size:70,rotate:180,x:55,y:70})))},g=(n(30),n(17)),h=n.n(g);const E=[{label:"Mouse",value:0},{label:"Pen",value:1},{label:"Multiouch",value:2}];var y=()=>{const{currentDev:e}=Object(a.useContext)(d.a),{devMode:t,setDevMode:n}=Object(a.useContext)(u.a);Object(o.d)();return r.a.createElement("div",{className:"HomeContainer"},r.a.createElement("div",{style:{whiteSpace:"nowrap",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{onClick:()=>{e.write([0,170,85,1])}},r.a.createElement(f.a,{name:"Start-Icon",size:80}),r.a.createElement("br",null),"Start"),r.a.createElement("button",{onClick:()=>{e.write([0,170,85,2])}},r.a.createElement(f.a,{name:"Target-Hover",size:80}),r.a.createElement("br",null),"Calibrate"),r.a.createElement("button",{onClick:()=>{e.write([0,170,85,3])}},r.a.createElement(f.a,{name:"Installation-Icon",size:80}),r.a.createElement("br",null),"Install")),r.a.createElement("div",{className:"noDrag",style:{height:30,margin:5}},r.a.createElement(h.a,{onChange:t=>{0===t?e.write([0,170,85,8]):1===t?e.write([0,170,85,7]):2===t&&e.write([0,170,85,6]),console.log("Change DevMode",t)},options:E,forcedSelectedIndex:t})),r.a.createElement("div",{style:{whiteSpace:"nowrap",display:"flex",justifyContent:"center"}},r.a.createElement(i.a,null)))},C=n(20);var x=e=>r.a.createElement(u.b,null,r.a.createElement(d.b,null,r.a.createElement(o.c,null,r.a.createElement(o.b,{exact:!0,path:"/",component:s}),r.a.createElement(o.b,{path:"/devControl",component:y}),r.a.createElement(o.b,{path:"/start",component:w}),r.a.createElement(o.b,{path:"/firmware",component:C.a}),r.a.createElement(o.b,{path:"/calibration"},r.a.createElement(v,null)),r.a.createElement(o.b,{path:"/installation"},r.a.createElement(b,null)))));n(38);let j=document.createElement("div");j.id="root",document.body.appendChild(j),Object(l.render)(r.a.createElement(o.a,null,r.a.createElement(x,null)),document.getElementById("root"))},6:function(e,t,n){"use strict";var a=n(0),r=n.n(a);n(1);t.a=()=>r.a.createElement("button",{onClick:()=>{window.close()}},r.a.createElement("div",{style:{display:"flex",whiteSpace:"nowrap",alignContent:"center",alignItems:"center",justifyContent:"center",width:200}},r.a.createElement("label",{style:{margin:5}},"Exit")))},8:function(e,t,n){"use strict";var a=n(0),r=n.n(a),l=n(2);t.a=()=>{const{currentDev:e,setCurrentDev:t,devs:n}=Object(a.useContext)(l.a);return e?null:r.a.createElement("div",null,r.a.createElement("ul",{className:"list-group list-group-flush"},n.map((n,a)=>r.a.createElement("li",{key:a,className:"list-group-item",onClick:()=>{e&&e.close(),t(new window.HID.HID(n.path))}},r.a.createElement("div",null,"Path : ",n.path),r.a.createElement("div",null,"Serial : ",n.serialNumber),r.a.createElement("div",null,"Manufacturer:",n.manufacturer,", Product:",n.product,", interface:",n.interface,", VID:0x",n.vendorId.toString(16),", PID:0x",n.productId.toString(16)),n.usagePage&&r.a.createElement("div",null,"Usage Page : 0x",n.usagePage.toString(16),", Usage : 0x",n.usage.toString(16))))))}}});